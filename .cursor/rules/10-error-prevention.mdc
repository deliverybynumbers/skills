---
description: "Common mistakes and error prevention guidelines"
alwaysApply: true
---

# Error Prevention and Common Mistakes

This document lists critical mistakes to avoid and how to prevent them. These rules always apply.

## ⚠️ Critical Warnings

### 1. DO NOT Edit Generated Files Manually

**Mistake**: Editing files in `docs/roles/**/*.md` directly

**Why it's wrong**: These files are auto-generated by `scripts/generate_pages.py`. Your changes will be lost when pages are regenerated.

**Correct approach**:
- Edit `scripts/generate_pages.py` instead
- Modify role definitions, framework content, or page structure in the script
- Regenerate pages: `venv/bin/python3 scripts/generate_pages.py`

**Files to never edit manually**:
- `docs/roles/engineering/**/*.md`
- `docs/roles/management/**/*.md`
- `docs/roles/product/**/*.md`
- `docs/roles/programmes/**/*.md`

**Files you CAN edit**:
- `docs/index.md`
- `docs/about.md`
- `scripts/*.py`
- `mkdocs.yml`

### 2. Always Use Virtual Environment

**Mistake**: Installing packages globally with `pip install` or `pip3 install`

**Why it's wrong**: Pollutes system Python, causes version conflicts, makes project non-portable.

**Correct approach**:
- Always use `venv/bin/pip install package`
- Or activate venv first: `source venv/bin/activate` then `pip install`
- Update `requirements.txt` after installing new packages

**Commands**:
```bash
# Create venv (if needed)
python3 -m venv venv

# Install dependencies
venv/bin/pip install -r requirements.txt

# Run scripts
venv/bin/python3 scripts/generate_pages.py
```

### 3. Regenerate Pages After Script Changes

**Mistake**: Modifying `scripts/generate_pages.py` but forgetting to regenerate pages

**Why it's wrong**: Generated pages become out of sync with script logic, changes don't appear.

**Correct approach**:
- After ANY change to `scripts/generate_pages.py`, regenerate:
  ```bash
  venv/bin/python3 scripts/generate_pages.py
  ```
- Commit script changes and regenerated pages together

**When to regenerate**:
- After editing role definitions (`ROLE_SKILLS`, `ROLE_TITLES`, `ENGINEER_TYPES`)
- After changing framework overview (`FRAMEWORK_OVERVIEW`, `LEVEL_DESCRIPTIONS`)
- After modifying page structure or formatting
- After any change to `scripts/generate_pages.py`

### 4. Update Navigation After Adding Roles

**Mistake**: Adding new role types but not updating `mkdocs.yml` navigation

**Why it's wrong**: New pages won't be accessible via navigation menu, even though they exist.

**Correct approach**:
1. Add role definitions to `scripts/generate_pages.py`
2. Regenerate pages
3. Update `mkdocs.yml` navigation section
4. Test navigation menu

### 5. Validate Skill Codes Exist

**Mistake**: Adding invalid SFIA skill codes to `ROLE_SKILLS`

**Why it's wrong**: Pages will generate but show warnings, skills won't appear correctly.

**Correct approach**:
- Verify skill codes exist in SFIA CSV before adding
- Check parser output for warnings about missing codes
- Use valid SFIA skill codes (e.g., "SWDN", "PROG", "ARCH")

## Common Issues and Solutions

### Issue: "Module not found" errors

**Cause**: Running scripts without virtual environment or missing dependencies

**Solution**:
```bash
# Ensure venv exists and is activated
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Run script
python scripts/generate_pages.py
```

### Issue: CSV parsing errors

**Cause**: Encoding issues or malformed CSV

**Solution**: The parser handles multiple encodings automatically. If it fails:
- Check CSV file is not corrupted
- Verify file path is correct
- Check parser error messages for specific issues

### Issue: Generated pages missing content

**Cause**: Skill codes not found in SFIA CSV, or missing level descriptions

**Solution**:
- Check parser warnings for missing skill codes
- Verify skill codes are correct in `ROLE_SKILLS`
- Check that SFIA CSV contains the expected skills
- Script uses fallback logic for missing levels, but verify output

### Issue: Navigation links broken

**Cause**: File paths changed or pages moved

**Solution**:
- Verify all generated files exist at expected paths
- Check `mkdocs.yml` navigation paths match actual file locations
- Test navigation after regenerating pages
- Use relative paths consistently

### Issue: Changes not appearing in browser

**Cause**: Dev server not running, or pages not regenerated

**Solution**:
1. Ensure dev server is running: `./dev.sh` or `venv/bin/python3 dev.py`
2. Regenerate pages if you modified scripts
3. Hard refresh browser (Ctrl+Shift+R / Cmd+Shift+R)
4. Check browser console for errors

## Prevention Checklist

Before committing changes:

- [ ] Used virtual environment (not global packages)
- [ ] Regenerated pages after script changes
- [ ] Updated navigation if adding new roles
- [ ] Tested build: `mkdocs build`
- [ ] Verified all links work
- [ ] Checked for parser warnings
- [ ] Committed script + generated pages together

## Quick Reference

**Never do**:
- ❌ Edit `docs/roles/**/*.md` files
- ❌ Install packages globally
- ❌ Skip regeneration after script changes
- ❌ Commit without testing build

**Always do**:
- ✅ Use `venv/bin/python3` for scripts
- ✅ Regenerate after editing `scripts/generate_pages.py`
- ✅ Test build before committing
- ✅ Update navigation when adding roles
- ✅ Commit script + generated files together

## Reference

- Project structure: [@01-project-structure.mdc](01-project-structure.mdc)
- Python standards: [@02-python-standards.mdc](02-python-standards.mdc)
- Page generation: [@04-page-generation.mdc](04-page-generation.mdc)
- Development workflow: [@06-development-workflow.mdc](06-development-workflow.mdc)
